
これは、ヒトミのセーラー服（HITOMI_DLC_001）のスカートなどの両面フラグがオンになっているものを透けさせる場合、
そのまま透けさせたのでは色々と問題がある表示をより良い表示にする手順例です。
なお、作業順序はこの通りでなくてもある程度変更できます。

参考画像
http://www.mediafire.com/convkey/0252/68t9e4j01emosoxzg.jpg



■ 使用するツールとアドオン

Texture Tool JPN Custom
TMC Polygon Tool
TMC Polygon Insert Tool
TMC Object Tool
Blender
for Blender tmcmesh Importer-Exporter
PhotoshopやGIMPなどのDDSファイルとアルファチャンネルを正しく扱える画像編集アプリケーション



■ Texture Tool JPN Customでの作業

1. Texture Tool JPN CustomでHITOMI_DLC_001.TMCを開きます。

2. ID 0のテクスチャを書き出します。
（行をドラッグしてフォルダにドロップすると簡単です）



■ 画像編集アプリケーションでの作業

画像編集アプリケーションでDDSファイルを開いて、お好きなように透け方を設定してDDSファイルで保存します。
保存時の圧縮形式はDXT5にします。ミップマップは無しで構いません。

※ この部分はお使いのアプリケーションの使用方法を各自で確認してください。
   なお、アルファチャンネルを追加してそのアルファチャンネルを変更する方法や、レイヤーを直接透けさせてやる方法などやり方は1つではありません。



■ 再度Texture Tool JPN Customでの作業

1. Texture Tool JPN CustomでHITOMI_DLC_001.TMCを開きます。

2. ID 0のテクスチャを先ほど保存したDDSファイルと差し替えます。
（ID 0を選択した状態でウィンドウにDDSファイルをドロップすると簡単です）

3. 「別名で保存」をクリックして、別名で保存します。
（保存名例：HITOMI_DLC_001_suke.TMC）



■ TMC Polygon Toolでの作業

1. TMC Polygon ToolでHITOMI_DLC_001.TMCを開きます。

2. ウィンドウ真ん中のオブジェクトの選択（「追加」ボタンの左）を「WGT_acs_skirt_0」に切り替えます。

3. YのMaxを「0.05」に変更します。

4. 「追加」をクリックします。（下にメッセージが表示され、左のリストに追加されます）

5. ウィンドウ右の「抽出」をクリックします。（フォルダ作成のチェックはお好みで）

6. YのMaxを「1」に戻します。

7. 再度「追加」をクリックします。（下にメッセージが表示され、分かりにくいですが左のリストに追加されます）

8. 再度抽出をクリックすると、今度は確認ダイアログが表示されるので「別名で保存」をクリックして、違う名前で保存します。
（保存名例：HITOMI_DLC_001-WGT_acs_skirt_0.001.tmcmesh）



■ Blenderでの作業

1. 最初に抽出したtmcmeshファイルをBlenderでインポートします。

2. for Blender Keep Vertex Normalsアドオンを導入している場合は「Keep Normals」のチェックを外します。

3. Edit Modeに切り替え、全選択します。（大体の場合はAキーを2回押すと全選択されます）

4. Ctrlキーを押しながらFキーを押すとメニューが表示されるので、一番上のFlip Normalsをクリックします。
（「Keep Normals」のチェックをいれたままFlip Normalsした場合は、Recalc Normalsをクリックします）

5. tmcmeshファイルとしてエクスポートします。エクスポート時にはUV2を「UV Maps2」に設定します。



■ TMC Object Toolでの作業

1. TMC Object Toolでテクスチャを差し替えたTMCファイルを開きます。

2. 「WGT_acs_skirt_0」を右クリックして表示されるメニューの「オブジェクトを追加」をクリックします。

3. 「WGT_acs_skirt」のZ2を「1」に変更します。

4. 「WGT_acs_skirt_0」と「WGT_acs_skirt_1」の透明を「1」にして、両面のチェックを外し、Z1を「08」に、Z2を「1」に変更します。

5. 「WGT_body」のZ2を「0」に変更します。

6. 「WGT_body_0」のZ1を「02」に、Z2を「0」に変更します。

7. 「別名で保存」をクリックして、別名で保存します。
（保存名例：HITOMI_DLC_001_suke - 1.TMC）


□ Z1とZ2について
半透明のものは基本的に手前にあるオブジェクトの順番を下にし、Z1を02より大きいもの（公式の多くは08）にします。
下にできない場合はZ1の値を大きくします。
Z2は半透明にした場合は1にすると良いようです。その場合はオブジェクトグループのZ2も1に変更したほうが良いようです。
0のままでもうまくいく場合もあるのでZ2に関してはまだ良く分かっていません。

※ 今回の設定ではセーラー服の透過は考慮していません。セーラー服も透過させたい場合は手順5と6は不要です。
   ただし、スカートが手前にある場合、その向こうに見えるセーラー服の描画がおかしくなると思います。



■ TMC Polygon Insert Toolでの作業

1. TMC Polygon Insert Toolで先ほど別名で保存したTMCファイルを開きます。

2. TMC Polygon Toolで後に抽出したtmcmeshファイル（以下A）とBlenderでエクスポートしたtmcmeshファイル（以下B）をウィンドウにドロップします。

3. Aの挿入先オブジェクトを「WGT_acs_skirt_1」に切り替えます。

4. Bの挿入先オブジェクトを「WGT_acs_skirt_0」に切り替え、動作を「置換」に切り替えます。

5. 「別名で保存」をクリックして、別名で保存すると完了です。
（保存名例：HITOMI_DLC_001_suke - 2.TMC）








■ おまけ：ヒトミのセーラー服（HITOMI_DLC_001）のスカーフ留めのUVがストッキング部分にあるのを修正する

□ 必要なツール

TMC UV Tool


□ 手順

1. TMC UV ToolでTMCファイルを開きます。

2. ウィンドウ真ん中のオブジェクトの選択（「追加」ボタンの左）を「WGT_body_2」に切り替えます。

3. 「追加」をクリックします。（下にメッセージが表示され、左のリストに追加されます）

4. 右上の「UV1 UV2 UV3 UV4」と並んでいるものを「UV1」「UV3」「UV4」にチェックが入った状態にします。

5. そのすぐ下の「拡大（原点0）」の「U」を「0.8」にします

6. さらにすぐ下の「移動（相対）」の「U」を「0.265」にします

7. 「別名で保存」をクリックして、別名で保存すると完了です。


テクスチャがそのままではほとんど分かりませんが、色変更した時は必要になります。








皆様の道徳心とマナーをもったMODライフの一助となることを願って。
