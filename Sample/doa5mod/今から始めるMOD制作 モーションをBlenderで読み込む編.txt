
BlenderでMPMファイルやtdpackファイルに含まれているモーションをインポートする手順です。
例としてKASUMI_MOT_WIN_120.tdpackをインポートしています。

なお、必要なファイルは既に用意されている前提になりますので、まだの場合はArchive Toolなどでファイルを抽出しておいて下さい。

また、以下インターフェースの説明は英語のものとなります。



■ 使用するツールとアドオン

Blender
for Blender TMC(PC) Importer
for Blender DOA5PC Motion Importer（バージョン0.10.0以降。それより前のバージョンでは一部内容が異なります）
for Blender DOA5PC Rigging（0.5.0以降）


■ モーションをインポートする前に

それぞれのTMCのインポートは必須ではありません。
適宜インポートして下さい。


1. コスチュームTMCをインポートします。

2. 顔TMCをインポートします。

3. 髪TMCをインポートします。

4. コスチュームTMCと顔TMCと髪TMCの3つのアーマチュアオブジェクトを選択します。

5. PropertiesパネルのDataタブの「DOA5PC Rigging」にある「Set to Follow Body」をクリックします。
   （顔と髪が体のボーンに追従するようになります）

次の「■ モーションのインポート」へ



DOA5PC Riggingアドオンを使用しない場合は、4.以降が以下の操作になります。

 4. 顔TMCのアーマチュアオブジェクトを選択してからPose Modeにし、Bone Constraintsパネルを表示します。

 5. 「MOT15_Neck」を選択してCopy Transformsコンストレイントを追加します。

 6. TargetにコスチュームTMCのアーマチュアオブジェクトを設定し、設定すると表示されるBoneに「MOT15_Neck」を設定します。

 7. 「MOT01_Head」を選択してCopy Transformsコンストレイントを追加します。

 8. TargetにコスチュームTMCのアーマチュアオブジェクトを設定し、設定すると表示されるBoneに「MOT01_Head」を設定します。


 9. 髪TMCのアーマチュアオブジェクトを選択してからPose Modeにし、Bone Constraintsパネルを表示します。

10. 「WGT_hair」を選択してCopy Locationコンストレイントを追加します。

11. TargetにコスチュームTMCのアーマチュアオブジェクトを設定し、設定すると表示されるBoneに「MOT01_Head」を設定します。

12. さらにCopy Rotationコンストレイントを追加します。

13. TargetにコスチュームTMCのアーマチュアオブジェクトを設定し、設定すると表示されるBoneに「MOT01_Head」を設定、Offsetにチェックを入れ、Spaceを両方Pose Spaceにします。

※ 顔と髪のボーンにコンストレイントを追加することで体のボーンに追従するようになります



■ モーションのインポート


1. コスチュームTMCと顔TMCの2つのアーマチュアオブジェクトを選択してから、メニュー「File」→「Import」→「DOA5PC Motion」をクリックしてモーションインポート画面を表示します。

2. 左下のオプションはいじらずにKASUMI_MOT_WIN_120.tdpackをダブルクリックするか、選択してから右上のボタン「Import DOA5PC Motion」をクリックしてインポートします。


以上でモーションのインポートと設定は完了です。
インポートしたモーションはNLA Editorパネルに自動で配置されます。



■ NLA Editorパネルに配置されたモーションの編集

配置しているモーションをクリックしてTabキーを押すと緑色になり、Dope SheetやGraph Editorなどで編集できるようになります。
編集が完了した場合はNLA Editorでもう一度Tabキーを押します。

Dope Sheetではキーフレームのタイミング、Graph Editorではモーションカーブで細かく編集できます。
それぞれの使い方はググると色々でてくると思います。



■ ちょっと高度な小ネタ : DOA5PC Riggingアドオンで作成したリグを使用してモーションを編集する

DOA5PC RiggingアドオンでコスチュームTMCのアーマチュアオブジェクトのリグを作成して、そのリグにモーションをインポートすると元のモーションからリグを使用して作成したモーションへ繋げることができます。
（この場合、コスチュームTMCのアーマチュアオブジェクトにはモーションはインポートせず、全てのモーション変更はリグの方で行います）

リグにモーションをインポートする場合は、オプションの「Disable Rig」のチェックを必ず入れたままにして下さい。

NLA Editorでアクションを選択し、Tabキーを押して編集モードにします。

モーションを変更したいフレームへ移動します。

IKや手首足首の回転のリグを使用したい部分のスイッチを右端まで移動します。（IKや手首足首などの回転のリグが有効になります）

モーションを変更していきます。

モーションを前後と繋げます。
IKや手首足首の回転のリグ以外のボーンは、通常のモーション編集と同じように前後のキーフレームを削除してモーションを繋げます。
リグのスイッチを有効にして影響があるボーンのキーフレームは変更する必要がなく、リグのスイッチをアニメーションさせることでモーションを繋げます。

NLA EditorでTabキーを押して編集を終了します。



DOA5PC Riggingアドオンのバージョン0.3.0以前で作成したリグの場合は、モーションをインポートすると、IKコンストレイントと手と足のCopy TransformsコンストレイントのInfluence（影響）が0になっていますので、その値をアニメーションさせることで元のモーションからリグを使用して作成したモーションへ繋げることができます。
Influenceのキーフレームを打つにはInfluenceの上にマウスカーソルを乗せて「I」キーを押します。








皆様の道徳心とマナーをもったMODライフの一助となることを願って。
